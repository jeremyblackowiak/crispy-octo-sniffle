{
    "projectName": "infrastructure",
    "targets": {
      "terraform-init": {
        "executor": "nx:run-commands",
        "options": {
          "cwd": "packages/infrastructure",
          "commands": [
            "terraform init"
          ]
        },
        "dependsOn": [
          {
            "target": "run-asdf-install",
            "projects": "pipeline-demo"
          }
        ]
      },
      "terraform-apply": {
        "executor": "nx:run-commands",
        "options": {
          "cwd": "packages/infrastructure",
          "commands": [
            "terraform apply {args.auto-approve}"
          ]
        },
        "dependsOn": [
          {
            "target": "terraform-init",
            "projects": "self"
          }
        ]
      },
      "build-infra": {
        "executor": "nx:run-commands",
        "options": {
          "cwd": "packages/infrastructure",
          "commands": [
            "echo 'Infrastructure Deployed!'"
          ]
        },
        "dependsOn": [
          {
            "target": "terraform-apply",
            "projects": "self"
          }
        ]
      },
      "build-infra-ci": {
        "executor": "nx:run-commands",
        "options": {
          "cwd": "packages/infrastructure",
          "commands": [
            "echo 'Infrastructure Deployed!'"
          ]
        },
        "dependsOn": [
          {
            "target": "terraform-apply",
            "args": {
              "auto-approve": "-auto-approve"
            },
            "projects": "self"
          }
        ]
      }
    }
  }